(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,a,t){e.exports=t(26)},22:function(e,a,t){},26:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),s=t(8),o=t.n(s),l=(t(21),t(22),t(15)),c=t(7),i=t.n(c),m=t(9),u=t(6),d=t(33),g=t(31),f=t(32);var h=t(27),p=t(28),v=t(29),E=(p.a,function(e){var a=e.title,t=e.children;return r.a.createElement(h.a,null,r.a.createElement(p.a,null,a),r.a.createElement(v.a,null,t))});function w(e){var a={displayDate:"Week ".concat(e.w),games:[]};return e.gms.forEach(function(e){var t=e.organizedInfo,n=t.id,r=t.status,s=t.awayTeam,o=t.homeTeam,l=t.awayTeamHasPosession,c=t.homeTeamHasPosession,i=t.awayTeamWinning,m=t.homeTeamWinning,u=t.awayTeamScore,d=t.homeTeamScore,g="";try{if("DATETIME"===r.type){var f=new Date(e.organizedInfo.status.value);g=f.toLocaleString("en-US",{weekday:"short",hour:"2-digit",minute:"2-digit"}).replace(/AM|PM/,"").trim()}else g=r.value}finally{}a.games.push({id:n,status:g,awayTeam:s,homeTeam:o,awayTeamWinning:i,homeTeamWinning:m,awayTeamScore:u,homeTeamScore:d,awayTeamHasPosession:l,homeTeamHasPosession:c,hidden:!1})}),a}function y(e){return b.apply(this,arguments)}function b(){return(b=Object(m.a)(i.a.mark(function e(a){var t,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"https://sports-new-tab-page.appspot.com/nfl",e.next=3,fetch("https://sports-new-tab-page.appspot.com/nfl");case 3:return e.next=5,e.sent.json();case 5:if(t=e.sent,n=w(t),a){e.next=9;break}return e.abrupt("return",n);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}var T=t(30),S=function(){return n.createElement("span",{role:"img","aria-label":"has posession",className:"d-none d-md-inline d-lg-inline"},"\xa0\ud83c\udfc8")},N=function(e){var a=e.game,t=e.removeGame;return n.createElement("tr",null,n.createElement("td",{className:"align-middle"},a.status),n.createElement("td",{className:"align-middle ".concat(a.awayTeamWinning?"winning_team":""," ").concat(a.awayTeamHasPosession?"has_posession":"")},a.awayTeam,n.createElement(S,null)),n.createElement("td",{className:"align-middle ".concat(a.homeTeamWinning&&"winning_team"," ").concat(a.homeTeamHasPosession?"has_posession":"")},a.homeTeam,a.homeTeamHasPosession&&n.createElement(S,null)),n.createElement("td",{className:"align-middle text-right"},a.awayTeamScore),n.createElement("td",{className:"align-middle text-right"},a.homeTeamScore),n.createElement("td",{className:"align-middle text-right"},n.createElement(d.a,{outline:!0,color:"secondary",size:"sm",onClick:function(){return t(a.id)}},"\u2573")))},O=function(){return n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null),n.createElement("th",null,"away"),n.createElement("th",null,"@home"),n.createElement("th",{className:"text-right"},"a"),n.createElement("th",{className:"text-right"},"h"),n.createElement("th",{className:"text-right"})))},x=function(e){var a=e.games,t=e.removeGame;return n.createElement(T.a,{responsive:!0,size:"sm"},n.createElement(O,null),n.createElement("tbody",null,a.filter(function(e){return!e.hidden}).map(function(e,a){return n.createElement(N,{key:a,game:e,removeGame:t})})))};function j(){var e=Object(n.useState)(function(){var e=localStorage.getItem("nfl-user-data");return e?JSON.parse(e):{removedGames:{date:"",games:{}}}}),a=Object(u.a)(e,2),t=a[0],s=a[1],c=Object(n.useState)(0),h=Object(u.a)(c,2),p=h[0],v=h[1],w=Object(n.useState)(function(){console.log("using cache");var e=localStorage.getItem("nfl-schedule-data");return e?JSON.parse(e):{displayDate:"",games:[]}}),b=Object(u.a)(w,2),T=b[0],S=b[1],N=Object(n.useState)(!1),O=Object(u.a)(N,2),j=O[0],G=O[1],k=function(){var e=Object(m.a)(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("<updating>"),console.log(T),G(!0),e.prev=3,e.next=6,y(void 0);case 6:a=e.sent,o.a.unstable_batchedUpdates(function(){S(a),G(!1)}),localStorage.setItem("nfl-schedule-data",JSON.stringify(T)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),G(!1);case 14:case"end":return e.stop()}},e,null,[[3,11]])}));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)(function(){k()},[p]),function(e){var a=Object(n.useState)(0),t=Object(u.a)(a,2),r=t[0],s=t[1];Object(n.useEffect)(function(){var a=!0,t=function(){a||e(),a=!0,s(r+1)},n=function(){return a=!1},o=function(){document.hidden?a=!1:(a||e(),a=!0,s(r+1))};return window.addEventListener("focus",t),window.addEventListener("blur",n),document.addEventListener("visibilitychange",o,!1),function(){window.removeEventListener("focus",t),window.removeEventListener("blur",n),document.removeEventListener("visibilitychange",o)}},[e])}(k);return T.games.map(function(e){e.hidden=!1}),T.displayDate===t.removedGames.date&&T.games.map(function(e){t.removedGames.games[e.id]&&(console.log("hidden"),e.hidden=!0)}),console.log("rendering..."),console.log(t),r.a.createElement(E,{title:r.a.createElement("span",null,r.a.createElement("span",{className:"font-weight-bold"},"NFL"),r.a.createElement("span",{className:"pl-2 font-weight-light font-italic text-lowercase text-muted"},T.displayDate),r.a.createElement(d.a,{outline:!0,size:"sm",className:"float-right",onClick:function(){localStorage.removeItem("nfl-schedule-data"),localStorage.removeItem("nfl-user-data"),s({removedGames:{date:"",games:{}}}),v(p+1),console.log(">>> reseting")},disabled:j,style:{width:"50px"}},j?r.a.createElement(g.a,{size:"sm",color:"primary",type:"grow"}):"Reset"))},j&&r.a.createElement(f.a,{animated:!0,style:{height:"5px"},color:"info",value:100}),r.a.createElement(x,{games:T.games,removeGame:function(e){var a=Object(l.a)({},t);a.removedGames.date!==T.displayDate&&(a.removedGames.date=T.displayDate,a.removedGames.games={}),a.removedGames.games[e]=!0,s(a),localStorage.setItem("nfl-user-data",JSON.stringify(a))}}))}var G=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"card-columns"},r.a.createElement(j,null))))};o.a.render(r.a.createElement(G,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.48ba0ed8.chunk.js.map